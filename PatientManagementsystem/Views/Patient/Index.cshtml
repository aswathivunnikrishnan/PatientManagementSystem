@model IEnumerable<PatientManagementsystem.Models.Patient>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "CreatePatient")
</p>
<script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">

<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>

<div class="modal fade" id="deleteConfirm" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" data-backdrop="static" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" id="deleteform">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold" id="ModalTitle">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </h4>
            </div>
            <div class="modal-body mx-3" id="deletebody">
            </div>
            <div class="modal-footer d-flex justify-content-center">
                <button type="button" class="btn btn-danger" onclick="confirmDelete($('#deleteid').val())" style="width:75px">Confirm</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal" style="width:75px">Cancel</button>
            </div>
        </div>
    </div>
</div>
<table id="table_id" class="table">
    <thead class="thead-dark">
        <tr>
            <th scope="col">Id</th>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Gender</th>
            <th scope="col">Age</th>
            <th scope="col">Address</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Email</th>
            <th scope="col">Action</th>
        </tr>
    </thead>

</table>
<script>
    $(document).ready(function () {
        $('#table_id').DataTable(
            {
                "ajax": {
                    url: "/Patient/GetAll",
                    type: "Get",
                    dataType: "json",
                },

                "columns": [

                    { 'data': 'Patient_Id' },
                    { 'data': 'FirstName' },
                    { 'data': 'LastName' },
                    { 'data': 'Gender' },
                    { 'data': 'Age' },
                    { 'data': 'Address' },
                    { 'data': 'PhoneNumber' },
                    { 'data': 'Email' },
                    {
                        'data': 'Patient_Id', 'render': function (data) {
                            return '<a class="orenge" title="Edit" onclick="editGetStudent(' + data + ')" > <span class="glyphicon glyphicon-edit"></span></a>  <a class="red" title="Delete"  onclick="Delete(' + data + ')"> <span class="glyphicon glyphicon-trash"></span></a>';
                        }
                    }

                ],
                /*"serverSide": true,*/
                /* "order": [1, "asc"],*/
                "scrollY": "370px",
                "scrollCollapse": false,

            });


    });


    function editGetStudent(id) {
       /* $.post("/Patient/Edit/" + id);*/
        window.location.href = "@Url.Action("Edit", "Patient")" +"/"+ id;
    }

    function Delete(id) {
       window.location.href = "@Url.Action("Delete", "Patient")" +"/"+ id;
    }





</script>

<style>

    .orenge{
        color:orange;
        font-size:x-large;
        cursor:pointer;
    }
    .red {
        color: red;
        font-size: x-large;
        cursor: pointer;
    }
</style>

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>